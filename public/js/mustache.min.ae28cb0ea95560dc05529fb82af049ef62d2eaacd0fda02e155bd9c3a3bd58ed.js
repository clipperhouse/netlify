/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */(function(t,n){typeof exports=="object"&&exports&&typeof exports.nodeName!="string"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(t.Mustache={},n(t.Mustache))})(this,function(t){var r,l,d,h,m,f,p,g,v,j=Object.prototype.toString,i=Array.isArray||function(t){return j.call(t)==="[object Array]"};function a(e){return typeof e=="function"}function E(e){return i(e)?"array":typeof e}function c(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function u(e,t){return e!=null&&typeof e=="object"&&t in e}function C(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}d=RegExp.prototype.test;function x(e,t){return d.call(e,t)}h=/\S/;function O(e){return!x(h,e)}f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function b(e){return String(e).replace(/[&<>"'`=/]/g,function(t){return f[t]})}g=/\s*/,v=/\s+/,l=/\s*=/,m=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function y(e,n){if(!e)return[];E=!1,S=[],h=[],y=[],k=!1,f=!1,b="",C=0;function D(){if(k&&!f)for(;y.length;)delete h[y.pop()];else y=[];k=!1,f=!1}function z(e){if(typeof e=="string"&&(e=e.split(v,2)),!i(e)||e.length!==2)throw new Error("Invalid tags: "+e);M=new RegExp(c(e[0])+"\\s*"),x=new RegExp("\\s*"+c(e[1])),T=new RegExp("\\s*"+c("}"+e[1]))}for(z(n||t.tags),s=new o(e);!s.eos();){if(d=s.pos,r=s.scanUntil(M),r)for(var s,a,r,d,u,h,f,b,j,y,x,C,E,k,A,S,M,T,F=0,N=r.length;F<N;++F)j=r.charAt(F),O(j)?(y.push(h.length),b+=j):(f=!0,E=!0,b+=" "),h.push(["text",j,d,d+1]),d+=1,j===`
`&&(D(),b="",C=0,E=!1);if(!s.scan(M))break;if(k=!0,a=s.scan(p)||"name",s.scan(g),a==="="?(r=s.scanUntil(l),s.scan(l),s.scanUntil(x)):a==="{"?(r=s.scanUntil(T),s.scan(m),s.scanUntil(x),a="&"):r=s.scanUntil(x),!s.scan(x))throw new Error("Unclosed tag at "+s.pos);if(a==">"?A=[a,r,d,s.pos,b,C,E]:A=[a,r,d,s.pos],C++,h.push(A),a==="#"||a==="^")S.push(A);else if(a==="/"){{if(u=S.pop(),!u)throw new Error('Unopened section "'+r+'" at '+d);if(u[1]!==r)throw new Error('Unclosed section "'+u[1]+'" at '+d)}}else a==="name"||a==="{"||a==="&"?f=!0:a==="="&&z(r)}if(D(),u=S.pop(),u)throw new Error('Unclosed section "'+u[1]+'" at '+s.pos);return w(_(h))}function _(e){for(var t,n,o=[],s=0,i=e.length;s<i;++s)t=e[s],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(o.push(t),n=t));return o}function w(e){for(var t,a,o=[],s=o,n=[],i=0,r=e.length;i<r;++i)switch(t=e[i],t[0]){case"#":case"^":s.push(t),n.push(t),s=t[4]=[];break;case"/":a=n.pop(),a[5]=t[2],s=n.length>0?n[n.length-1][4]:o;break;default:s.push(t)}return o}function o(e){this.string=e,this.tail=e,this.pos=0}o.prototype.eos=function(){return this.tail===""},o.prototype.scan=function(t){var n,s=this.tail.match(t);return!s||s.index!==0?"":(n=s[0],this.tail=this.tail.substring(n.length),this.pos+=n.length,n)},o.prototype.scanUntil=function(t){var n,s=this.tail.search(t);switch(s){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,s),this.tail=this.tail.substring(s)}return this.pos+=n.length,n};function s(e,t){this.view=e,this.cache={".":this.view},this.parent=t}s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){if(c=this.cache,c.hasOwnProperty(t))s=c[t];else{for(var n,s,i,r,c,o=this,l=!1;o;){if(t.indexOf(".")>0)for(n=o.view,i=t.split("."),r=0;n!=null&&r<i.length;)r===i.length-1&&(l=u(n,i[r])||C(n,i[r])),n=n[i[r++]];else n=o.view[t],l=u(o.view,t);if(l){s=n;break}o=o.parent}c[t]=s}return a(s)&&(s=s.call(this.view)),s};function n(){this.cache={}}return n.prototype.clearCache=function(){this.cache={}},n.prototype.parse=function(n,s){var i=this.cache,a=n+":"+(s||t.tags).join(":"),o=i[a];return o==null&&(o=i[a]=y(n,s)),o},n.prototype.render=function(t,n,o,i){var a=this.parse(t,i),r=n instanceof s?n:new s(n);return this.renderTokens(a,r,o,t,i)},n.prototype.renderTokens=function(t,n,s,o,i){for(var a,r,c,d="",l=0,u=t.length;l<u;++l)a=0[0],r=t[l],c=r[0],c==="#"?a=this.renderSection(r,n,s,o):c==="^"?a=this.renderInverted(r,n,s,o):c===">"?a=this.renderPartial(r,n,s,i):c==="&"?a=this.unescapedValue(r,n):c==="name"?a=this.escapedValue(r,n):c==="text"&&(a=this.rawValue(r)),a!==0[0]&&(d+=a);return d},n.prototype.renderSection=function(t,n,s,o){d=this,c="",r=n.lookup(t[1]);function u(e){return d.render(e,n,s)}if(!r)return;if(i(r))for(var r,c,d,l=0,h=r.length;l<h;++l)c+=this.renderTokens(t[4],n.push(r[l]),s,o);else if(typeof r=="object"||typeof r=="string"||typeof r=="number")c+=this.renderTokens(t[4],n.push(r),s,o);else if(a(r)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");r=r.call(n.view,o.slice(t[3],t[5]),u),r!=null&&(c+=r)}else c+=this.renderTokens(t[4],n,s,o);return c},n.prototype.renderInverted=function(t,n,s,o){var a=n.lookup(t[1]);if(!a||i(a)&&a.length===0)return this.renderTokens(t[4],n,s,o)},n.prototype.indentPartial=function(t,n,s){for(var a=n.replace(/[^ \t]/g,""),i=t.split(`
`),o=0;o<i.length;o++)i[o].length&&(o>0||!s)&&(i[o]=a+i[o]);return i.join(`
`)},n.prototype.renderPartial=function(t,n,s,o){if(!s)return;var i,c,l,d,r=a(s)?s(t[1]):s[t[1]];if(r!=null)return l=t[6],d=t[5],c=t[4],i=r,d==0&&c&&(i=this.indentPartial(r,c,l)),this.renderTokens(this.parse(i,o),n,s,i)},n.prototype.unescapedValue=function(t,n){var s=n.lookup(t[1]);if(s!=null)return s},n.prototype.escapedValue=function(n,s){var o=s.lookup(n[1]);if(o!=null)return t.escape(o)},n.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="3.1.0",t.tags=["{{","}}"],r=new n,t.clearCache=function(){return r.clearCache()},t.parse=function(t,n){return r.parse(t,n)},t.render=function(t,n,s,o){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+E(t)+'" was given as the first argument for mustache#render(template, view, partials)');return r.render(t,n,s,o)},t.to_html=function(n,s,o,i){var r=t.render(n,s,o);if(a(i))i(r);else return r},t.escape=b,t.Scanner=o,t.Context=s,t.Writer=n,t})