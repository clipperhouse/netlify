(function(e){e.ajaxSetup({cache:!0});const o="https://api.stackexchange.com/2.2/",n="&key=zg)SFUiAw3KznQKAw)AXzQ((",s={api_sites:function(e){return o+"sites?page="+e+"&pagesize=100&filter=!Fn45Y*tjmFi3M0vFdE*Orm1hST"+n},api_tags:function(e,t){return o+"tags?pagesize=16&order=desc&sort=popular&inname="+encodeURIComponent(t)+"&site="+e.api_site_parameter+"&filter=!*M27MxijjqVg4jGo"+n},api_tags_popular:function(e){return o+"tags?pagesize=4&order=desc&sort=popular&site="+e.api_site_parameter+"&filter=!*M27MxijjqVg4jGo"+n},api_tag_count:function(e,t){return o+"questions?order=desc&sort=activity&tagged="+encodeURIComponent(t)+"&site="+e.api_site_parameter+"&filter=!LQa0AXyWeCS0eBBhfz)UnE"+n},api_tags_related:function(e,t){return o+"tags/"+encodeURIComponent(t)+"/related?site="+e.api_site_parameter+"&pagesize=8&filter=!n9Z4Y*b7KJ"+n}},b=function(e,t){for(var n=(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString();n.split(".").length>1&&n.split(".")[1].length<t;)n+="0";return n};let t={},r=null;const c=e(document),m=e("#menu"),u=e("h1"),g=e("span.site-name"),i=e("input[name=search]"),h=e("#correlations"),l=e("#popular");c.ready(async function(){await v(a),await d(),window.onpopstate=d,i.autocomplete({source:async function(n,o){const a=await e.getJSON(s.api_tags(t.site,n.term.toLowerCase()));for(var r=[],i=0;i<a.items.length;i++)item=a.items[i],r.push({label:item.name,value:item.name,href:"#"+t.site.api_site_parameter+"/"+encodeURIComponent(item.name)});o(r)},select:function(e,t){location.href=t.item.href},autoFocus:!0,delay:200,open:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&e(".ui-autocomplete").off("menufocus hover mouseover")}}),i.focus()});let a=new Map;const v=async function(){const t=await e.getJSON(s.api_sites(1));for(let n=0;n<t.items.length;n++){const e=t.items[n];e.site_type==="main_site"&&e.name.indexOf("Meta")!==0&&e.site_state==="normal"&&(a.set(e.api_site_parameter,e),r=r||e)}let n=e("<div>");a.forEach(t=>{const s=e("<a>").attr("href","#"+t.api_site_parameter).attr("data-turbolinks","false").html(t.name).css("background-image","url("+t.icon_url+")");n.append(s).append(`
`)}),m.html(n.html())};c.on("click",'a[href^="#"]',async function(t){t.preventDefault();const n=e(this).attr("href"),s=p(n);history.replaceState({},"",n),await f(s)});const d=async function(){const e=p(location.href);await f(e)},p=function(e){let n={},t=e.split("#");if(t.length<2)return n.site=r,n;const o=t[1];t=o.split("/");const s=a.get(t[0]);return s&&(n.site=s),t.length>1&&(n.tag=decodeURIComponent(t[1])),n},f=async function(n){t=n,j(t.site),t.tag?(i.val(t.tag),await w(t.site,t.tag)):(await _(t.site),i.val("").focus(),h.html(""),e("html").animate({scrollTop:0}))};var j=function(e){const t="a[href='#"+e.api_site_parameter+"']";m.find(t).addClass("selected").siblings().removeClass("selected"),u.html(e.name+" tag correlations"),u.css("background-image","url("+e.icon_url+")").attr("href","#"+e.api_site_parameter),g.text(e.name)};const y=document.getElementById("popular-tmpl").innerHTML,_=async function(t){const n=await e.getJSON(s.api_tags_popular(t));n.items.forEach(e=>{e.encodedName=encodeURIComponent(e.name)});const o=Mustache.render(y,{site:t,tags:n.items});l.html(o).show()},w=async function(t,n){const o=await e.getJSON(s.api_tag_count(t,n));await x(t,n,o.total)},O=document.getElementById("correlations-tmpl").innerHTML,x=async function(t,n,o){const r=await e.getJSON(s.api_tags_related(t,n));let i=[];for(var a=0;a<r.items.length;a++){if(item=r.items[a],item.name==n)continue;i.push({parent:n,tag:item.name,href:"#"+t.api_site_parameter+"/"+encodeURIComponent(item.name),correlation:b(100*item.count/o,0)+"%",first:i.length==0})}const c=Mustache.render(O,{correlations:i});h.css("opacity","0").html(c).animate({opacity:1},100),l.hide()};c.on("search","input",function(){this.value===""&&(location.href="#"+t.site.api_site_parameter)})})(jQuery)