<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Know your guarantees, Go edition</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.40.3" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.ab4b67a3ea25990fa8279f3b7ef08b61.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Know your guarantees, Go edition" />
<meta property="og:description" content="I was directed to a thread about a poor soul who started a project in Go, eventually had to hand it off to the community, and discovered that his original source no longer compiled, due to third-party dependencies having changed. Key quote: Not even the original programmer, with the original files on his original dev machine, can compile the source anymore.
I feel for the guy. Unfortunately, the above quote is not correct." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/blog/know-your-guarantees-go-edition/" />



<meta property="article:published_time" content="2014-07-12T01:53:50&#43;00:00"/>

<meta property="article:modified_time" content="2014-07-12T01:53:50&#43;00:00"/>











<meta itemprop="name" content="Know your guarantees, Go edition">
<meta itemprop="description" content="I was directed to a thread about a poor soul who started a project in Go, eventually had to hand it off to the community, and discovered that his original source no longer compiled, due to third-party dependencies having changed. Key quote: Not even the original programmer, with the original files on his original dev machine, can compile the source anymore.
I feel for the guy. Unfortunately, the above quote is not correct.">


<meta itemprop="datePublished" content="2014-07-12T01:53:50&#43;00:00" />
<meta itemprop="dateModified" content="2014-07-12T01:53:50&#43;00:00" />
<meta itemprop="wordCount" content="574">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Know your guarantees, Go edition"/>
<meta name="twitter:description" content="I was directed to a thread about a poor soul who started a project in Go, eventually had to hand it off to the community, and discovered that his original source no longer compiled, due to third-party dependencies having changed. Key quote: Not even the original programmer, with the original files on his original dev machine, can compile the source anymore.
I feel for the guy. Unfortunately, the above quote is not correct."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="http://example.org/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      
      








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw8 center">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        BLOGS
      </p>
      <h1 class="f1 athelas mb1">Know your guarantees, Go edition</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2014-07-12T01:53:50Z">July 12, 2014</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>I was directed to a thread about a <a href="http://forums.thedailywtf.com/forums/t/27755.aspx">poor soul</a> who started a project in Go, eventually had to hand it off to the community, and discovered that his original source no longer compiled, due to third-party dependencies having changed. Key quote:
Not even the original programmer, with the original files on his original dev machine, can compile the source anymore.</p>

<p>I feel for the guy. Unfortunately, the above quote is not correct. He didn’t have all of the original files. He only had his own.</p>

<p>See, he took dependencies on third-party code he doesn’t control. That’s a fundamental choice to make. It is a fundamental characteristic of his program (and his dev process).</p>

<p>The complaint is that Go does not prevent this. It’s true! Versioned dependencies are not a feature of the base platform.</p>

<p>It’s also a deliberate choice, where the Go authors chose not to implement a feature when they felt that the trade-offs were no good.</p>

<p>One low-level reason they made this choice is to avoid slow compilation and bloated binaries (which are two sides of the same coin). Remember, packages depend on other packages. So Foo might depend on Bar 2.1. Foo might also depend on Baz which in turn depends on Bar 1.9, and on down the tree. So that would mean compiling and linking several copies of nearly identical code.</p>

<p>Depending on several versions of the same package also means knowing which version one is calling, whereby the dependency mess seeps into your source code.</p>

<p>Which leads us to the high-level reasoning behind the Go platform punting on this feature: they did not have a logical solution they considered acceptable. It’s not that they don’t understand the problem; it’s that, at the moment, there is not a solution they like. So they choose no feature over over a regressive one.</p>

<p>It’s a controversial stance. After all, npm and bundler and many other systems have dependency versioning built-in, and people work with them every day. But if you’ve used them, you know they are not without flaws.</p>

<p>I’ll speculate further: perhaps dependency versioning is not unlike “high availability” software. It makes promises of reliability, at the expense of increased complexity and bloat. After all, you are running a lot more code with a lot more relationships.</p>

<p>Often, “high availability” solutions don’t net out to being more reliable, due to this underestimated complexity. <strong>Perhaps it’s better to make no guarantee, than to make one that you can’t keep.</strong></p>

<p>This is also something of a cultural experiment on Go’s part. By removing these (possibly) false guarantees, you are forced to be much more deliberate about managing your code and its dependencies. Trust but verify.</p>

<p>It sounds like our poor soul from the opening paragraph trusted, but didn’t verify.</p>

<p>— -</p>

<p>As a practical matter, here’s what he should have done. First, recognize that he was depending on code that is <strong>out of his control</strong>. Second, make a choice: don’t depend on it, or turn it into code that he does control.</p>

<p>He could fork those repos and depend on his own copy. He could “vendor” them into his solution with something like <a href="https://github.com/tools/godep">godep</a>. He could depend on the weak (but not non-existent) promise of <a href="http://labix.org/gopkg.in">tagged versions</a>.</p>

<p>Remember: everything about third-party code is a decision about trust. Waving the wand of “versioned dependencies” doesn’t change that. In fact, it might fool us into seeing guarantees that don’t exist.</p>

<p><a href="https://news.ycombinator.com/item?id=8028216"><em>discuss on hacker news</em></a></p>
<ul class="pa0">
  
</ul>
<div class="mt6">
        
      </div>
    </main>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy; 2018 My New Hugo Site
  </a>
  








  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
